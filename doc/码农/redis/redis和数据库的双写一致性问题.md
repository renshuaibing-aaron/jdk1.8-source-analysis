1.redis和数据的并发写 如何保证数据的一致性 什么是缓存的CAP模式？
  在数据库系统是单机的情况下，在写数据库的时候，可以先写数据库，然后删除缓存里面的值，这样增加一次缓存失效，但是可以保证
  数据的一致性
  
说明 这里并没有双读的问题 只有同时往数据库和redis缓存里面同时写才会出现问题
针对redis的数据双写的一致性问题 事情不是想象的那么简单  
可以肯定的是 为了保证数据的一致性 双写是不行的 肯定要删除redis中数据 但是具体到 什么时间删除 是先写数据库 删除redis 还是先删除redis再写数据库
有很大的争议 但是肯定的是在高并发的情况下 这两个方案都存在缺陷
https://blog.csdn.net/weixin_43258908/article/details/89199088


2.如何保证redis的双写一致性？
1.先更新缓存,然后更新数据库  -----没人会用这个方案 原因：线程A更新缓存(这个包含两步 删除缓存,更新缓存) 假如线程A删除缓存, 然后线程B此时请求发现缓存失效
会读数据库 然后更新缓存 然后A更新数据库 得了 以后数据库里面得到的都是脏数据
https://www.cnblogs.com/wangwust/p/9467586.html
2.https://www.jianshu.com/p/d3495426e2a4
先更新数据库 再更新缓存
在高并发的场景下，可能会出现数据库与缓存数据不一致的的情况，考虑下面情形：
1、线程A发起一个写操作，还未操作数据库
2、缓存刚好失效
3、线程B查询数据库，得一个旧值
4、线程A将新值写入数据库
5、线程A删除缓存
6、线程B将查到的旧值写入缓存
