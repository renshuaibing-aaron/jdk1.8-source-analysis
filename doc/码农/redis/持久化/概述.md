如果redis只用作缓存那么便不用考虑持久化问题，但是在一些项目中redis是用作数据库来的，那么便需要考虑缓存的持久化 
redis的持久化有两种 AOF和RDB 需要知道怎么开启redis的持久化机制,以及这两种持久化机制所带来的优缺点？


9.怎么保证redis挂掉之后再重启数据可以进行恢复？  
主要是redis的持久化机制，不同的持久化机制的优缺点，持久化的机制的底层原理是什么？  
redis的RDB和AOF两种持久化机制的工作原理
    RDB简单的说是把整个数据文件进行一个备份 ，比较适合做冷备份 这个本质就是快照模式 
    AOF简单的说 把redis的每次操作的日志整一个文件 AOF文件 所以两种持久化机制的优缺点就明白了
    
 RDB 需要定时进行拷贝 那么便会导致数据存在一定的情况下的丢失  并且可能出现redis在某个时间不可用 ，本质是redis的主进程会fork一个子进程进行磁盘的IO操作
 所以rdb活着bgsave的原理是 fork和cowfork是指redis通过创建子进程来进行bgsave操作，cow指的是copy on write，子进程创建后，父子进程共享数据段，父进程继续提供读写服务，
 写脏的页面数据会逐渐和子进程分离开来
 
 
 
 AOF 数据保存的最完整，又因为文件里面保存的是写日志 所以在恢复的时候需要一定的时间
AOF可以更好的保护数据不丢失，一般AOF会每隔一秒通过一个后台线程执行一次的
fsync的操作，最多丢失一秒钟的数据，并且AOF日志以append-only模式写入，所以没有任何的磁盘寻址的开销，写入性能很高，而且文件不容易破损
说明 在不在意性能的情况下可以修改aof的sync属性 使得每条写指令都会进行sync一下磁盘 不丢失数据  但是在实际中不予许 所以一般是1s写一次 会导致可能1s的数据丢失



3.RDB持久化
   如何开启RDB持久化：两种方式 
       1)通过配置参数 在配置文件中写入 save 60 1000 #60秒内如果有1000个key发生变化触发RDB快照的执行
       2)通过客户端执行bgsave命令显式的触发RDB的快照执行
           执行流程：在客户端输入bgsave命令后，Redis调用bgsaveCommand函数，该函数fork一个子进程执行rdbSave函数进行实际的快照存储工作，而父进程可以继续处理客户端请求。
                    当子进程退出后，父进程调用相关回调函数进行后续处理
                    注意了解fork进程的作用













































